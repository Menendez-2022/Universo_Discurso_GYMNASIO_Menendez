

CREATE TABLE TIPO_EMPLEADO (
	TIPO_ID         integer   NOT NULL,
	TIPO_DETALLE    varchar(40),
	
	CONSTRAINT TIPO_EMPLEADO_pk PRIMARY KEY (TIPO_ID)
);

CREATE TABLE TIPO_CLIENTE (
	TIPO_ID          integer   NOT NULL,
	TIPO_DETALLE     varchar(33),
	
	CONSTRAINT TIPO_CLIENTE_pk PRIMARY KEY (TIPO_ID)
);

CREATE TABLE TIPO_PLAN (
	PLAN_ID         integer NOT NULL,
	PLAN_NOMBRE     varchar(30),
	PLAN_DETALLE    varchar(60),
	PLAN_COSTO      real,
	
	CONSTRAINT TIPO_PLAN_pk PRIMARY KEY (PLAN_ID)
);

CREATE TABLE TIPO_RUTINA (
	TIPO_RUTI_ID        integer NOT NULL,
	TIPO_RUT_NOMBRE     varchar(30),
	TIPO_RUT_DETALLE    varchar(100),
	
	CONSTRAINT TIPO_RUTINA_pk PRIMARY KEY (TIPO_RUTI_ID)
);

CREATE TABLE EMPLEADO (
    EMPLEADO_ID         integer NOT NULL,
	EMPLEADO_CODE       varchar(8) NOT NULL,
	EMPLEADO_CEDULA     integer NOT NULL,
	EMPLEADO_NOMBRE     varchar(30),
	EMPLEADO_APELLIDO   varchar(30),
	EMPLEADO_CORREO     varchar(40),
	EMPLEADO_CELULAR    integer,
	EMPLEADO_PROVINCIA  varchar(15),
	FECHA_CONTRATACION  date,
	MOTIVO_FINALIZACION_CONTRATO varchar (65),
	TIPO_ID_EMPLEADO    integer NOT NULL,
	
	CONSTRAINT EMPLEADO_pk PRIMARY KEY (EMPLEADO_ID)
);

CREATE TABLE RUTINA (
    RUTI_ID              integer NOT NULL,
	RUTI_CODE            varchar(10) NOT NULL,
	RUTI_DETALLE         varchar(400),
	
	CONSTRAINT RUTINA_pk PRIMARY KEY (RUTI_ID)
);

CREATE TABLE CLIENTE (
    CLIENTE_ID             integer NOT NULL, 
	CLIENTE_CODE           varchar(6) NOT NULL,
	CLIENTE_CEDU           integer NOT NULL,
	CLIENTE_NOMBRE         varchar(30),
	CLIENTE_APELLIDO       varchar(30),
	CLIENTE_CELULAR        integer,
	CLIENTE_CORREO         varchar(30),
	CLIENTE_PROVINCIA      varchar(15),
	FECHA_INSCRIPCION      date,
	CLIENTE_SALDO          real,
	PLAN_ID_CLIENTE        integer,
	TIPO_ID_CLIENTE        integer NOT NULL,
	RUTI_ID_CLIENTE        integer NOT NULL,
	
	CONSTRAINT CLIENTE_pk PRIMARY KEY (CLIENTE_ID )
);

CREATE TABLE HISTORIAL_PAGO_PLAN (
    HISTORI_PAGO_PLAN_ID               integer NOT NULL,
	HISTORI_FECHA_PAGO_PLAN             date,
	CLIENTE_ID_HISTORI_PAGO_PLAN        integer NOT NULL,
    PLAN_ID_HISTORI_PAGO_PLAN          integer NOT NULL,
	 TIPO_ID_HISTORI_PAGO_PLAN    integer NOT NULL,
	 
	 
	CONSTRAINT HISTORIAL_PAGO_PLAN_pk PRIMARY KEY ( HISTORI_PAGO_PLAN_ID    )
	
);

CREATE TABLE HORARIO_INGRESO_GYM (
	INGRESO_GYM_ID       integer NOT NULL ,
	CLIENTE_ID_INGRESO_GYM integer NOT NULL,
	FECHA_INGRESO_GYM     date,
	HORA_INGRESO  time,
	HORA_SALIDA   time,  
	
	
	CONSTRAINT HORARIO_INGRESO_GYM_pk PRIMARY KEY (INGRESO_GYM_ID)
);

CREATE TABLE ESTABLECER_RUTINA (
	ESTABLEC_RUTI_ID       integer NOT NULL,
	ESTABLEC_RUTI_FECHA    date,
	EMPLEADO_ID_ESTABLEC_RUTI integer NOT NULL,
	RUTI_ID_ESTABLEC_RUTI  integer NOT NULL,
	
	
	CONSTRAINT ESTABLECER_RUTINA_pk PRIMARY KEY (ESTABLEC_RUTI_ID)
);

CREATE TABLE MAQUINA (
    MAQUINA_ID            integer NOT NULL,
	MAQUINA_CODE          varchar (10) NOT NULL,
	MAQUINA_NOMBRE        varchar(40),
	MAQUINA_DESCRIPCION   varchar(75),
	FECHA_COMPRA          date,
	
	CONSTRAINT MAQUINA_pk PRIMARY KEY (MAQUINA_ID)
);

CREATE TABLE USO_MAQUINA (
	USO_ID              integer NOT NULL,
	MAQUINA_ID_USO      integer NOT NULL,
	CLIENTE_ID_USO      integer NOT NULL,
	FECHA_USO           date,
	
	CONSTRAINT USO_MAQUINA_pk PRIMARY KEY (USO_ID)
);

CREATE TABLE SERVICIO_TECNICO (
    SERVI_TECNI_ID        integer NOT NULL, 
	SERVI_TECNI_CODE      varchar(10) NOT NULL,
	SERVI_TECNI_NOMBRE    varchar(40),
	SERVI_TECNI_CELULAR   integer,
    SERVI_TECNI_DIRECCION varchar(40),
	SERVI_TECNI_CORREO    varchar(30),
	
	CONSTRAINT SERVICIO_TECNICO_pk PRIMARY KEY (SERVI_TECNI_ID)
);

CREATE TABLE MANTENIMIENTO (
    MANTENI_ID            integer NOT NULL, 
	MANTENI_CODE          varchar(10) NOT NULL,
	MANTENI_FECHA         date,
	MAQUINA_ID_MANTENI    integer NOT NULL,
	SERVI_TECNI_ID_MANTENI integer NOT NULL,
	
	CONSTRAINT MANTENIMIENTO_pk PRIMARY KEY (MANTENI_ID)
);

CREATE TABLE OFERTA_PRODUCTO (
    OFERT_PRODUCT_ID      integer NOT NULL, 
	OFERT_PRODUCT_COD     varchar (10) NOT NULL,
	OFERT_PRODUCT_NOMBRE  varchar(100),
	OFERT_PRODUCT_DESCR   varchar(120),
	OFERT_PRODUCT_COSTO   real,
	OFERT_PRODUCT_STOCK   integer default 0,
	
	CONSTRAINT  OFERTA_PRODUCTO_pk PRIMARY KEY (OFERT_PRODUCT_ID )
);

CREATE TABLE FACTURA (
	FACTURA_ID           integer NOT NULL,
	FACTURA_NUMBERO      varchar(10),
	FACTURA_FECHA        date,
	FACTURA_SUBTOTAL     real DEFAULT (0),
	FACTURA_IVA          real DEFAULT (0),
	FACTURA_TOTAL        real DEFAULT (0),
	
	CONSTRAINT FACTURA_pk PRIMARY KEY (FACTURA_ID)
);

CREATE TABLE FACTURA_DETALLE (
	FACTU_DETA_ID        smallserial NOT NULL,
	FACTURA_ID           integer NOT NULL,
	CLIENTE_ID_FACTURA_DETALLE    integer NOT NULL,
	OFERT_PRODUCT_ID     integer  NOT NULL,
	FACTU_DETA_CANTIDAD  integer,
	FACTU_DETA_PRECIO    real DEFAULT (0),
	FACTU_DETA_IVA       real DEFAULT (0),
	FACTU_DETA_SUBTOTAL  real DEFAULT (0),
	
	CONSTRAINT FACTURA_DETALLE_pk PRIMARY KEY (FACTU_DETA_ID  )
);
